CREATE TABLE IF NOT EXISTS `{{DATASET_ID}}.transactions` (
  -- A unique identifier for each transaction, can be generated by your app.
  transaction_id STRING NOT NULL,
  -- Foreign key linking back to the asset being transacted.
  asset_key INTEGER NOT NULL,
  -- The exact timestamp when the buy or sell was executed.
  transaction_timestamp TIMESTAMP NOT NULL,
  -- The type of transaction: 'BUY' or 'SELL'.
  transaction_type STRING NOT NULL,
  -- The number of units involved in the transaction. Always positive.
  quantity NUMERIC NOT NULL,
  -- The price per unit paid or received in the transaction.
  price_per_unit NUMERIC,
  -- Any commission or fees paid for the transaction.
  commission NUMERIC,
  -- Optional field for notes (e.g., 'Exercised stock option').
  notes STRING
)
OPTIONS (
  description = 'Records all buy and sell transactions. The source for calculating historical holdings and cost basis.'
);